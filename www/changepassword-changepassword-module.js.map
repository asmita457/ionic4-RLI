{"version":3,"sources":["webpack:///./src/app/changepassword/changepassword.module.ts","webpack:///./src/app/changepassword/changepassword.page.html","webpack:///./src/app/changepassword/changepassword.page.scss","webpack:///./src/app/changepassword/changepassword.page.ts"],"names":[],"mappings":"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","file":"changepassword-changepassword-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ChangepasswordPage } from './changepassword.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ChangepasswordPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [ChangepasswordPage]\n})\nexport class ChangepasswordPageModule {}\n","module.exports = \"<!--<ion-header color=\\\"medium\\\">-->\\n<ion-toolbar color=\\\"medium\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n        <!-- <ion-back-button text=\\\"\\\" defaultHref=\\\"home\\\" class=\\\"menubutton\\\">\\n        </ion-back-button> -->\\n        <ion-menu-button class=\\\"menubutton\\\"></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title align=\\\"center\\\" class=\\\"titleall\\\">Change Password</ion-title>\\n</ion-toolbar>\\n<!--</ion-header>-->\\n\\n<ion-content align=\\\"center\\\" class=\\\"textheading\\\" padding>\\n    <img class=\\\"LogoSet\\\" src=\\\"assets/icon/rlilogo.png\\\" />\\n    <!--<div style=\\\"padding: 20px\\\">-->\\n    <h4 style=\\\"font-size: 16px;font-weight: bold\\\">Change Your Commander Credentials</h4>\\n    <!--</div>-->\\n    <ion-list>\\n        <form #form=\\\"ngForm\\\" novalidate>\\n            <ion-item>\\n                <ion-label position=\\\"floating\\\" color=\\\"medium\\\" style=\\\"font-size: 13px\\\">\\n                    <ion-icon name=\\\"mail\\\"></ion-icon>\\n                    Badge/Email\\n                </ion-label>\\n                <ion-input type=\\\"email\\\" name=\\\"email\\\" [readonly]=\\\"readonly()\\\" [(ngModel)]=\\\"email\\\"></ion-input>\\n                <!-- <ion-input type=\\\"email\\\" name=\\\"email\\\" [(ngModel)]=\\\"email\\\" required pattern=\\\"[A-Za-z0-9._%+-@$/+*!#^&()=]{1,}\\\"></ion-input> -->\\n            </ion-item>\\n\\n            <ion-item>\\n                <ion-label position=\\\"floating\\\" color=\\\"medium\\\" style=\\\"font-size: 13px\\\">\\n                    <ion-icon name=\\\"lock\\\"></ion-icon>\\n                    Old Password\\n                </ion-label>\\n                <ion-input type=\\\"password\\\" name=\\\"OldPassword\\\" [(ngModel)]=\\\"OldPassword\\\"></ion-input>\\n\\n                <!-- <ion-input type=\\\"password\\\" name=\\\"oldpassword\\\" [(ngModel)]=\\\"oldpassword\\\" required -->\\n                <!-- pattern=\\\"[A-Za-z0-9._%+-@$/+*!#^&()=]{1,}\\\"></ion-input> -->\\n            </ion-item>\\n            <ion-item>\\n                <ion-label position=\\\"floating\\\" color=\\\"medium\\\" style=\\\"font-size: 13px\\\">\\n                    <ion-icon name=\\\"lock\\\"></ion-icon>\\n                    New Password\\n                </ion-label>\\n                <ion-input type=\\\"password\\\" name=\\\"NewPassword\\\" [(ngModel)]=\\\"NewPassword\\\"></ion-input>\\n\\n                <!-- <ion-input type=\\\"password\\\" name=\\\"New_password\\\" [(ngModel)]=\\\"New_password\\\" required pattern=\\\"[A-Za-z0-9._%+-@$/+*!#^&()=]{1,}\\\"></ion-input> -->\\n            </ion-item>\\n\\n            <br>\\n            <button class=\\\"buttonclass\\\" padding=\\\"2px\\\" align=\\\"center\\\" (click)=\\\"changePassword()\\\" padding=\\\"10px\\\"\\n                type=\\\"submit\\\">Submit</button>\\n        </form>\\n    </ion-list>\\n\\n</ion-content>\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NoYW5nZXBhc3N3b3JkL2NoYW5nZXBhc3N3b3JkLnBhZ2Uuc2NzcyJ9 */\"","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AuthServicesService } from '../providers/Auth-Services/auth-services.service';\nimport { ToastController, AlertController, LoadingController } from '@ionic/angular';\nimport { NetworkProviderService } from '../providers/NetworkProvider/network-provider.service';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { DataSevicesService } from '../providers/Data-Services/data-sevices.service'\n@Component({\n  selector: 'app-changepassword',\n  templateUrl: './changepassword.page.html',\n  styleUrls: ['./changepassword.page.scss'],\n})\nexport class ChangepasswordPage implements OnInit {\n  observable: Observable<any>;\n  email: string\n  OldPassword: string\n  NewPassword: string\n  resultData: any\n  oldPassword: any\n  newPassword: any\n\n  constructor(\n    private router: Router,\n    public authServicesService: AuthServicesService,\n    private toastCtrl: ToastController,\n    public loadingController: LoadingController,\n    private alertCtrl: AlertController,\n    public networkProvider: NetworkProviderService,\n    private http: HttpClient,\n    public dataServices: DataSevicesService\n  ) {\n  }\n\n  ngOnInit() {\n    this.email = localStorage.getItem(\"Badge\")\n  }\n\n  readonly() {\n    return true;\n  }\n\n  changePassword() {\n    if (this.networkProvider.getNetworkStatus() == 'Online') {\n      if (this.email == \"\" || this.email == undefined || this.email == null) {\n        this.presentAlert(\"Sorry\", \"Please enter badge or email\")\n        return\n      }\n      if (this.OldPassword == undefined || this.OldPassword == \"\") {\n        this.presentAlert(\"Sorry\", \"Please enter old password\")\n        return\n      }\n      if (this.NewPassword == undefined || this.NewPassword == \"\") {\n        this.presentAlert(\"Sorry\", \"Please enter new password\")\n        return\n      }\n      if (this.OldPassword.length < 5 || this.NewPassword.length < 5) {\n        console.log('OldPassword length: ' + this.OldPassword.length + '\\nNewPassword length: ' + this.NewPassword.length)\n        this.presentAlert('Sorry', 'Please enter valid password').then(_ => {\n          this.presentToast('Password length should be greater than 5 characters')\n        });\n        return\n      }\n\n      let badge = localStorage.getItem('Badge')\n      this.observable = this.callChangePasswordAPI(badge, this.OldPassword, this.NewPassword);\n      this.observable.subscribe((result) => {\n        console.log('password data: ', JSON.stringify(result));\n        if (result.status == 200) {\n          this.loadingController.dismiss()\n          if (result.data != \"\") {\n            alert(JSON.parse(result.data).message)\n            this.NewPassword = \"\"\n            this.OldPassword = \"\"\n          } else {\n            this.loadingController.dismiss()\n            this.presentToast('Something went wrong')\n          }\n        } else {\n          this.loadingController.dismiss()\n          this.presentToast('Something went wrong')\n        }\n      }, error => {\n        console.log('error in password: ' + JSON.stringify(error))\n        this.loadingController.dismiss()\n        if (error == 'Response with status: 0 for URL: null') {\n          alert('No internet connection.')\n        }\n        if (error.status == 401) {\n          // this.dataServices.DeleteSqliteDB_Tables()\n          this.displayUnauthoriesdAlert();\n        }\n        this.NewPassword = \"\"\n        this.OldPassword = \"\"\n      })\n    } else {\n      alert('No internet connection.')\n    }\n  }\n\n  callChangePasswordAPI(badge: string, oldPassword: string, newPassword: string) {\n    this.presentLoading()\n    let Authtoken = localStorage.getItem('AuthToken')\n    var headers = new HttpHeaders();\n    headers.append('Content-Type', 'application/json')\n    headers.append('Authorization', Authtoken)\n    return this.http.get('http://rlicommander.com/live/common/api/user_fxs.php?format=json&method=change_password&k=83&badge=' + badge + '&old_password=' + oldPassword + '&new_password=' + newPassword, { headers: headers });\n  }\n\n  async presentAlert(title, message) {\n    const alert = await this.alertCtrl.create({\n      header: title,\n      // subHeader: 'Please enter valid password',\n      message: message,\n      buttons: ['OK']\n    });\n\n    await alert.present();\n  }\n\n  async presentLoading() {\n    const loading = await this.loadingController.create({\n      message: 'Please wait...',\n      spinner: null\n    });\n    await loading.present();\n    const { role, data } = await loading.onDidDismiss();\n    console.log('Loading dismissed!');\n  }\n\n  async presentToast(message) {\n    // this.toastMsgs.push(msg);\n    let toast = await this.toastCtrl.create({\n      message: message,\n      duration: 3000,\n      position: 'bottom'\n    });\n    toast.present();\n  }\n\n  async displayUnauthoriesdAlert() {\n    const alert = await this.alertCtrl.create({\n      header: 'Unauthorized',\n      subHeader: '',\n      buttons: [{\n        text: 'ok',\n        handler: () => {\n          this.router.navigate(['/login']);\n        }\n      }]\n    });\n\n    await alert.present();\n  }\n}\n\n"],"sourceRoot":""}